module.exports = app => {
	const auth = require('../../middleWares/auth')
	// const { readAllCanMessagesAtInterval, processAllCanSendsAtInterval } = require('../../routes/getData/bcu')
	const canIds = [
		0x1C000010, 0x1C001010, 0x1C002010, 0x1C003010,
		0x1C405010, 0x1C406010, 0x1C40D010, 0x1C415010, 0x1C401010, 0x1C400010,
		0x1C300010, 0x1C301010, 0x1C302010, 0x1C303010, 0x1C304010, 0x1C305010, 0x1C306010, 0x1C307010, 0x1C308010, 0x1C309010, 0x1C30A010, 0x1C30B010, 0x1C30C010, 0x1C30D010, 0x1C30E010, 0x1C30F010, 0x1C310010, 0x1C311010, 0x1C312010, 0x1C313010, 0x1C314010, 0x1C315010, 0x1C316010, 0x1C317010, 0x1C318010, 0x1C319010, 0x1C31A010, 0x1C31B010, 0x1C31C010, 0x1C31D010, 0x1C31E010, 0x1C31F010, 0x1C320010, 0x1C321010, 0x1C322010, 0x1C323010, 0x1C324010, 0x1C325010, 0x1C326010, 0x1C327010, 0x1C328010, 0x1C329010, 0x1C32A010, 0x1C32B010, 0x1C32C010, 0x1C32D010, 0x1C32E010, 0x1C32F010, 0x1C330010, 0x1C331010, 0x1C332010, 0x1C333010, 0x1C334010, 0x1C335010, 0x1C336010, 0x1C337010, 0x1C338010, 0x1C339010, 0x1C33A010, 0x1C33B010,
		0x1C402010, 0x1C403010, 0x1C404010, 0x1C407010, 0x1C408010, 0x1C409010, 0x1C40A010, 0x1C40B010,
		0x1C40E010, 0x1C40F010, 0x1C412010, 0x1C413010, 0x1C414010, 0x1C417010, 0x1C418010, 0x1C419010,
		0x1C100010, 0x1C101010, 0x1C102010, 0x1C103010, 0x1C104010, 0x1C105010, 0x1C106010, 0x1C107010, 0x1C108010, 0x1C109010, 0x1C10A010, 0x1C10B010, 0x1C10C010, 0x1C10D010, 0x1C10E010, 0x1C10F010, 0x1C110010, 0x1C111010, 0x1C112010, 0x1C113010, 0x1C114010, 0x1C115010, // 可读
		0x1C116010, 0x1C117010, 0x1C118010, 0x1C119010, 0x1C11A010, 0x1C11B010, 0x1C11C010, 0x1C11D010, 0x1C11E010, 0x1C11F010, 0x1C120010, 0x1C121010, 0x1C122010, 0x1C123010, 0x1C124010, 0x1C125010, 0x1C126010, 0x1C127010, 0x1C128010, 0x1C129010, 0x1C12A010, 0x1C12B010, // 可读
		0x1C12C010, 0x1C12D010, 0x1C12E010, 0x1C12F010, 0x1C130010, 0x1C131010, 0x1C132010, 0x1C133010, 0x1C134010, 0x1C135010, 0x1C136010, 0x1C137010, 0x1C138010, 0x1C139010, 0x1C13A010, 0x1C13B010, 0x1C200010, 0x1C201010, 0x1C202010, 0x1C203010, 0x1C204010, 0x1C205010, // 可读
		0x1C206010, 0x1C207010, 0x1C208010, 0x1C209010, 0x1C20A010, 0x1C20B010, 0x1C20C010, 0x1C20D010, 0x1C20E010, 0x1C20F010, 0x1C210010, 0x1C211010, 0x1C212010, 0x1C213010, 0x1C214010, 0x1C215010, // 可读
		0x1C216010, 0x1C217010, 0x1C218010, 0x1C219010, 0x1C21A010, 0x1C21B010, 0x1C21C010, 0x1C21D010, 0x1C21E010, 0x1C21F010, 0x1C220010, 0x1C221010, 0x1C222010, 0x1C223010, 0x1C224010, 0x1C225010, 0x1C226010, 0x1C227010, 0x1C228010, 0x1C229010, 0x1C22A010, 0x1C22B010, // 可读
		0x1C22C010, 0x1C22D010, 0x1C22E010, 0x1C22F010, 0x1C230010, 0x1C231010, 0x1C232010, 0x1C233010, 0x1C234010, 0x1C235010, 0x1C236010, 0x1C237010, 0x1C238010, 0x1C239010, 0x1C23A010, 0x1C23B010, // 可读
		0x1C800010, 0x1C804010, 0x1C808010, 0x1C809010, 0x1C82D010, 0x1C830010, 0x1C837010, 0x1C838010, 0x1C839010
	];
	/**
	 *    * @description 查询信息
	 *       * */
	app.get('/monitor/getBMSData', auth('*:*:*'), async (req, res) => {
		try {
			// const bcu1 = await readAllCanMessagesAtInterval(canIds)
			let bcu1 = [
			'0102000000010000', '0010000000100010',
								'0000001000000000', '0100100000000010', '0002bc0400f00000', '0000d823d8230000',
								'0000000000000000', 'ff69000000000000', '0000000000000000', '0000000000000000',
								'0000000000000c80', '00000c8000000c80', '0000000000e20000', '000002a3000002a3',
								'000002a3000001c1', '000001c1e4cf01c1', 'fcca0000c9d05961', '09f603e832d009bf',
								'fcca00003ddb0395', '0000000000000000', '6200f03f7810f57a', '1f00000002df0000',
								'cc070000002176b4', 'ccccccccf4d00000', '01ca000010d12d6b', '000700d0ff000000',
								'04fcff3f8a4f2a94', '1c000000000000a8', '0000000800000000', '000000308b8db000',
								'0c800feb10331032', '0ffd0fbe1000100d', '0fe6102a102f100a', '104b105a104a104b',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'029f02a0029f02a0', '029f02a0029f02a2', '02a202a302a002a2', 'f748f748f748f748',
								'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748',
								'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748',
								'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748',
								'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748',
								'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748',
								'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748',
								'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748',
								'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748',
								'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748',
								'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748', 'f748f748f748f748',
								'f748f748f748f748', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0000000000000000', '0000000000000000', '0000000000000000', '0000000000000000',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064', '0064006400640064', '0064006400640064',
								'0064006400640064', '0064006400640064',
			]
			res.send({
				code: 200,
				message: '操作成功',
				data: bcu1
			})
		} catch (e) {
			res.send({
				code: 201,
				message: e.message
			})
		}
	});
	/**
	 *    * @description 查询信息
	 *       * */
	app.get('/monitor/getNavBMSData', auth('*:*:*'), async (req, res) => {
		try {
			// const bcu = await readAllCanMessagesAtInterval([0x1C400010])
			let bcu = [
				'0005000000010000'
			]
			res.send({
				code: 200,
				message: '操作成功',
				data: bcu
			})
		} catch (e) {
			res.send({
				code: 201,
				message: e.message
			})
		}
	});

	app.post('/monitor/controlDeviceStatus', auth('*:*:*'), async (req, res) => {
		try {
			await processAllCanSendsAtInterval(req.body)
			res.send({
				code: 200,
				message: '操作成功'
			});
		} catch (e) {
			res.send({
				code: 201,
				message: e.message
			});
		}
	});
}



